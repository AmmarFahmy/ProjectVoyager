<html>
    <head>
        <title>Voyager File Manager</title>
        <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
        <link rel="stylesheet" href="sift.css"/>
    </head>
    <body onload="goToFolder(pathString)">
    <div id="titlewrapper">
        <div id="titlebar">
            <div id="bck_btn" class="topbtn" onclick="ipcRenderer.send('bck')"><img src="./bin/img/bck.png"/></div>
            <div id="fwd_btn" class="topbtn" onclick="ipcRenderer.send('fwd')"><img src="./bin/img/fwd.png"/></div>
            <div id="titleplace">Voyager File Manager (Beta)</div>
            <div id="min_btn" class="topbtn" onclick="ipcRenderer.send('min')"><img src="./bin/img/min.png"/></div>
            <div id="rsz_btn" class="topbtn" onclick="ipcRenderer.send('rsz')"><img src="./bin/img/max.png"/></div>
            <div id="cls_btn" class="topbtn" onclick="ipcRenderer.send('cls')"><img src="./bin/img/cls.png"/></div>
        </div>
    </div>
    <div id="pathboxcontainer">
    <div id="up_btn" class="topbtn" onclick="ipcRenderer.send('up', pathString)"><img src="./bin/img/up.png"/></div>
    <input type="text" id="pathbox" onkeydown="textFieldKeyHandler(event)"></input>
    <div id="hm_btn" class="topbtn" onclick="goToFolder(os.homedir())"><img src="./bin/img/hm.png"/></div>
    <div id="rf_btn" class="topbtn" onclick="goToFolder(document.getElementById('pathbox').value)"><img src="./bin/img/rf.png"/></div>
    <div id="go_btn" class="topbtn" onclick="goToFolder(document.getElementById('pathbox').value)"><img src="./bin/img/fwd.png"/></div>
    </div>
        <div id="content-box-holder">
            <table id="filelist">

            </table>
        </div>
        <script>
            const os = require('os');
            var pathString = os.homedir();
            const { ipcRenderer } = require('electron');
            const fs = require('fs');
            ipcRenderer.on('igot', (evt, args) => {
                if (args.contentType === 'text/html'){
                    document.getElementById('filelist').innerHTML = args.pagedata;
                    pathString = args.pathString;
                    document.getElementById('pathbox').value = pathString;
                } else {
                    //set rules for content viewing
                }
            });
            ipcRenderer.on('maxd', () => {
                document.getElementById('rsz_btn').innerHTML='<img src="./bin/img/res.png"/>';
                console.log('maximized on renderer');
            });
            ipcRenderer.on('resd', () => {
                document.getElementById('rsz_btn').innerHTML='<img src="./bin/img/max.png"/>';
                console.log('resized on renderer');
            });
            ipcRenderer.on('goget', (evt, pathString) => {
                ipcRenderer.send('getme', pathString, 0)
            });
            function textFieldKeyHandler(event) {
                if (event.key === 'Enter') {
                    goToFolder(document.getElementById('pathbox').value)
                }
                else {}
            }
            function goToFolder(pathString) { //use an onclick here
                if (fs.statSync(pathString).isFile()) {
                console.log(pathString); //log the pathString here
                } else {}
                ipcRenderer.send('getme', pathString, 1);
            }
        </script>
    </body>
</html>
